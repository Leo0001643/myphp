# é¦–é¡µå®¢æœæŒ‰é’®é›†æˆè¯´æ˜

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. PCç«¯ï¼ˆHomeæ¨¡å—ï¼‰
**æ–‡ä»¶**ï¼š`Application/Home/View/Index/index.html`

**ä½ç½®**ï¼šé¡µé¢å³ä¸‹è§’æ‚¬æµ®æŒ‰é’®

**åŠŸèƒ½**ï¼š
- âœ… åœ†å½¢æ‚¬æµ®æŒ‰é’®ï¼ˆ60x60pxï¼‰
- âœ… ç´«è‰²æ¸å˜èƒŒæ™¯
- âœ… ç™½è‰²èŠå¤©å›¾æ ‡ï¼ˆSVGï¼‰
- âœ… è„‰å†²åŠ¨ç”»æ•ˆæœ
- âœ… é¼ æ ‡æ‚¬åœæ”¾å¤§æ•ˆæœ
- âœ… ç‚¹å‡»è·³è½¬åˆ°èŠå¤©é¡µé¢
- âœ… æ–°æ¶ˆæ¯çº¢ç‚¹æç¤ºï¼ˆé¢„ç•™åŠŸèƒ½ï¼‰

**æ ·å¼ç‰¹ç‚¹**ï¼š
```css
- ä½ç½®ï¼šå³ä¸‹è§’ï¼ˆright: 30px, bottom: 30pxï¼‰
- å±‚çº§ï¼šz-index: 9999ï¼ˆæœ€é¡¶å±‚ï¼‰
- åŠ¨ç”»ï¼š2ç§’è„‰å†²åŠ¨ç”» + æ‚¬åœç¼©æ”¾
- é˜´å½±ï¼šç´«è‰²å…‰æ™•æ•ˆæœ
```

---

### 2. ç§»åŠ¨ç«¯ï¼ˆMobileæ¨¡å—ï¼‰
**æ–‡ä»¶**ï¼š`Application/Mobile/View/Index/index.html`

**ä½ç½®**ï¼šé¡µé¢å³ä¸‹è§’æ‚¬æµ®æŒ‰é’®ï¼ˆé¿å¼€åº•éƒ¨å¯¼èˆªæ ï¼‰

**åŠŸèƒ½**ï¼š
- âœ… åœ†å½¢æ‚¬æµ®æŒ‰é’®ï¼ˆ55x55pxï¼‰
- âœ… ç´«è‰²æ¸å˜èƒŒæ™¯
- âœ… ç™½è‰²èŠå¤©å›¾æ ‡ï¼ˆSVGï¼‰
- âœ… è„‰å†²åŠ¨ç”»æ•ˆæœ
- âœ… è§¦æ‘¸åé¦ˆï¼ˆæŒ‰ä¸‹ç¼©å°ï¼‰
- âœ… ç‚¹å‡»è·³è½¬åˆ°èŠå¤©é¡µé¢
- âœ… æ–°æ¶ˆæ¯çº¢ç‚¹æç¤ºï¼ˆé¢„ç•™åŠŸèƒ½ï¼‰

**æ ·å¼ç‰¹ç‚¹**ï¼š
```css
- ä½ç½®ï¼šå³ä¸‹è§’ï¼ˆright: 15px, bottom: 70pxï¼‰
- å°ºå¯¸ï¼š55x55pxï¼ˆé€‚é…ç§»åŠ¨ç«¯ï¼‰
- åŠ¨ç”»ï¼š2ç§’è„‰å†²åŠ¨ç”»
- è§¦æ‘¸ï¼šæŒ‰ä¸‹ç¼©å°90%
```

---

## ğŸ¨ è§†è§‰æ•ˆæœ

### PCç«¯æŒ‰é’®
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         â”‚
â”‚        ç½‘ç«™å†…å®¹          â”‚
â”‚                         â”‚
â”‚                         â”‚
â”‚                     â— â† å®¢æœæŒ‰é’®
â”‚                   (ç´«è‰²)  â”‚
â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç§»åŠ¨ç«¯æŒ‰é’®
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               â”‚
â”‚   ç½‘ç«™å†…å®¹    â”‚
â”‚               â”‚
â”‚            â— â† å®¢æœæŒ‰é’®
â”‚          (ç´«è‰²) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åº•éƒ¨å¯¼èˆªæ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ åŠŸèƒ½è¯´æ˜

### 1. ç‚¹å‡»è·³è½¬
```javascript
// PCç«¯
function openLiveChat() {
    window.location.href = "{:U('Chat/index')}";
}

// ç§»åŠ¨ç«¯
function openMobileLiveChat() {
    window.location.href = "{:U('Chat/index')}";
}
```

**ç›®æ ‡åœ°å€**ï¼š
- PCç«¯ï¼š`/index.php/Home/Chat/index`
- ç§»åŠ¨ç«¯ï¼š`/index.php/Mobile/Chat/index`

---

### 2. æ–°æ¶ˆæ¯æç¤ºï¼ˆé¢„ç•™åŠŸèƒ½ï¼‰

#### å¦‚ä½•å¯ç”¨çº¢ç‚¹æç¤ºï¼š
```javascript
// åœ¨é¡µé¢åŠ è½½æ—¶æ£€æŸ¥æ˜¯å¦æœ‰æ–°æ¶ˆæ¯
$(document).ready(function() {
    // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡æ–°æ¶ˆæ¯
    setInterval(checkNewMessages, 30000);
});

function checkNewMessages() {
    $.post("{:U('Chat/checkNewMessages')}", {}, function(res) {
        if (res.code == 1 && res.has_new_message) {
            // æ˜¾ç¤ºçº¢ç‚¹
            $('.chat-float-button').addClass('has-message');
        } else {
            // éšè—çº¢ç‚¹
            $('.chat-float-button').removeClass('has-message');
        }
    });
}
```

#### éœ€è¦åœ¨åç«¯æ·»åŠ çš„æ–¹æ³•ï¼š
```php
// Application/Home/Controller/ChatController.class.php
public function checkNewMessages()
{
    $userId = session('userId');
    if (!$userId) {
        $this->ajaxReturn(['code' => 0]);
    }
    
    // æ£€æŸ¥æ˜¯å¦æœ‰æœªè¯»æ¶ˆæ¯
    $hasNew = M('chat_message')
        ->alias('m')
        ->join('tw_chat_session s ON m.session_id = s.id')
        ->where([
            's.user_id' => $userId,
            'm.sender_type' => 'agent',
            'm.is_read' => 0
        ])
        ->count();
    
    $this->ajaxReturn([
        'code' => 1,
        'has_new_message' => $hasNew > 0,
        'unread_count' => $hasNew
    ]);
}
```

---

## ğŸ“ æŒ‰é’®å°ºå¯¸å’Œä½ç½®

### PCç«¯
| å±æ€§ | å€¼ |
|------|-----|
| å®½åº¦ | 60px |
| é«˜åº¦ | 60px |
| å³è¾¹è· | 30px |
| åº•è¾¹è· | 30px |
| å›¾æ ‡å°ºå¯¸ | 28x28px |
| çº¢ç‚¹å°ºå¯¸ | 12x12px |

### ç§»åŠ¨ç«¯
| å±æ€§ | å€¼ |
|------|-----|
| å®½åº¦ | 55px |
| é«˜åº¦ | 55px |
| å³è¾¹è· | 15px |
| åº•è¾¹è· | 70pxï¼ˆé¿å¼€åº•éƒ¨å¯¼èˆªï¼‰ |
| å›¾æ ‡å°ºå¯¸ | 24x24px |
| çº¢ç‚¹å°ºå¯¸ | 10x10px |

---

## ğŸ¨ é¢œè‰²æ–¹æ¡ˆ

```css
/* èƒŒæ™¯æ¸å˜ */
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

/* é˜´å½±é¢œè‰² */
box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);

/* çº¢ç‚¹é¢œè‰² */
background: #ff4444;

/* å›¾æ ‡é¢œè‰² */
fill: white;
```

---

## ğŸ”„ åŠ¨ç”»æ•ˆæœ

### 1. è„‰å†²åŠ¨ç”»ï¼ˆ2ç§’å¾ªç¯ï¼‰
```css
@keyframes pulse {
    0% {
        box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
    }
    50% {
        box-shadow: 0 4px 25px rgba(102, 126, 234, 0.6), 
                    0 0 0 10px rgba(102, 126, 234, 0.1);
    }
    100% {
        box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
    }
}
```

### 2. æ‚¬åœæ•ˆæœï¼ˆPCç«¯ï¼‰
```css
.chat-float-button:hover {
    transform: scale(1.1) translateY(-2px);
    box-shadow: 0 6px 25px rgba(102, 126, 234, 0.6);
}
```

### 3. æŒ‰ä¸‹æ•ˆæœ
```css
.chat-float-button:active {
    transform: scale(0.95);
}
```

### 4. çº¢ç‚¹é—ªçƒï¼ˆ1ç§’å¾ªç¯ï¼‰
```css
@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}
```

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. PCç«¯æµ‹è¯•
```
1. è®¿é—®é¦–é¡µï¼šhttp://your-domain.com/
2. çœ‹åˆ°å³ä¸‹è§’ç´«è‰²åœ†å½¢æŒ‰é’®
3. é¼ æ ‡æ‚¬åœï¼šæŒ‰é’®æ”¾å¤§ã€é˜´å½±å¢å¼º
4. ç‚¹å‡»æŒ‰é’®ï¼šè·³è½¬åˆ°èŠå¤©é¡µé¢
5. éªŒè¯URLï¼š/index.php/Home/Chat/index
```

### 2. ç§»åŠ¨ç«¯æµ‹è¯•
```
1. æ‰‹æœºè®¿é—®é¦–é¡µ
2. çœ‹åˆ°å³ä¸‹è§’ç´«è‰²åœ†å½¢æŒ‰é’®ï¼ˆåœ¨å¯¼èˆªæ ä¸Šæ–¹ï¼‰
3. è§¦æ‘¸æŒ‰é’®ï¼šç•¥å¾®ç¼©å°
4. æ¾å¼€æ‰‹æŒ‡ï¼šè·³è½¬åˆ°èŠå¤©é¡µé¢
5. éªŒè¯URLï¼š/index.php/Mobile/Chat/index
```

### 3. çº¢ç‚¹æµ‹è¯•ï¼ˆå¯ç”¨åï¼‰
```
1. å®¢æœå‘é€æ¶ˆæ¯
2. 30ç§’å†…è‡ªåŠ¨æ˜¾ç¤ºçº¢ç‚¹
3. ç‚¹å‡»æŒ‰é’®è¿›å…¥èŠå¤©
4. çº¢ç‚¹æ¶ˆå¤±
```

---

## âš™ï¸ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹æŒ‰é’®ä½ç½®
```css
/* PCç«¯ */
.chat-float-button {
    right: 30px;  /* è·ç¦»å³è¾¹ */
    bottom: 30px; /* è·ç¦»åº•éƒ¨ */
}

/* ç§»åŠ¨ç«¯ */
.mobile-chat-float-button {
    right: 15px;  /* è·ç¦»å³è¾¹ */
    bottom: 70px; /* è·ç¦»åº•éƒ¨ï¼ˆé¿å¼€å¯¼èˆªæ ï¼‰ */
}
```

### ä¿®æ”¹æŒ‰é’®é¢œè‰²
```css
/* æ›´æ”¹æ¸å˜è‰² */
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

/* è“è‰²æ–¹æ¡ˆ */
background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);

/* ç»¿è‰²æ–¹æ¡ˆ */
background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);

/* æ©™è‰²æ–¹æ¡ˆ */
background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
```

### ä¿®æ”¹æŒ‰é’®å¤§å°
```css
/* PCç«¯ - æ›´å¤§çš„æŒ‰é’® */
.chat-float-button {
    width: 70px;
    height: 70px;
}

/* ç§»åŠ¨ç«¯ - æ›´å°çš„æŒ‰é’® */
.mobile-chat-float-button {
    width: 50px;
    height: 50px;
}
```

### ç¦ç”¨åŠ¨ç”»
```css
/* ç§»é™¤è„‰å†²åŠ¨ç”» */
.chat-float-button {
    animation: none;
}
```

---

## ğŸš€ é«˜çº§åŠŸèƒ½ï¼ˆå¯é€‰æ‰©å±•ï¼‰

### 1. æ·»åŠ æ–‡å­—æç¤º
```html
<div class="chat-float-button" onclick="openLiveChat()">
    <svg>...</svg>
    <span class="chat-tooltip">åœ¨çº¿å®¢æœ</span>
</div>

<style>
.chat-tooltip {
    position: absolute;
    right: 70px;
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.3s;
}

.chat-float-button:hover .chat-tooltip {
    opacity: 1;
}
</style>
```

### 2. æ˜¾ç¤ºåœ¨çº¿å®¢æœæ•°
```html
<div class="chat-float-button" onclick="openLiveChat()">
    <svg>...</svg>
    <span class="online-count">3</span>
</div>

<style>
.online-count {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #00c853;
    color: white;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: bold;
}
</style>

<script>
// è·å–åœ¨çº¿å®¢æœæ•°
$.post("{:U('Chat/getOnlineAgents')}", {}, function(res) {
    if (res.code == 1) {
        $('.online-count').text(res.count);
    }
});
</script>
```

### 3. å·¥ä½œæ—¶é—´æç¤º
```javascript
function isWorkingHours() {
    const now = new Date();
    const hour = now.getHours();
    const day = now.getDay(); // 0=å‘¨æ—¥, 1-6=å‘¨ä¸€åˆ°å‘¨å…­
    
    // å·¥ä½œæ—¶é—´ï¼šå‘¨ä¸€åˆ°å‘¨äº” 9:00-18:00
    if (day >= 1 && day <= 5 && hour >= 9 && hour < 18) {
        return true;
    }
    return false;
}

$(document).ready(function() {
    if (!isWorkingHours()) {
        $('.chat-float-button').css('opacity', '0.6');
        $('.chat-float-button').attr('title', 'å®¢æœä¼‘æ¯ä¸­ï¼Œç•™è¨€å°†åœ¨å·¥ä½œæ—¶é—´å›å¤');
    }
});
```

---

## ğŸ“± å…¼å®¹æ€§

### æµè§ˆå™¨æ”¯æŒ
```
âœ… Chrome 60+
âœ… Firefox 60+
âœ… Safari 12+
âœ… Edge 79+
âœ… ç§»åŠ¨ç«¯Safari
âœ… ç§»åŠ¨ç«¯Chrome
âœ… å¾®ä¿¡å†…ç½®æµè§ˆå™¨
```

### å“åº”å¼æ–­ç‚¹
```css
@media (max-width: 768px) {
    .chat-float-button {
        right: 20px;
        bottom: 20px;
        width: 55px;
        height: 55px;
    }
}
```

---

## âœ… å®Œæˆæ¸…å•

```
âœ… PCç«¯æ‚¬æµ®æŒ‰é’®ï¼ˆHome/View/Index/index.htmlï¼‰
âœ… ç§»åŠ¨ç«¯æ‚¬æµ®æŒ‰é’®ï¼ˆMobile/View/Index/index.htmlï¼‰
âœ… ç‚¹å‡»è·³è½¬åŠŸèƒ½
âœ… è„‰å†²åŠ¨ç”»æ•ˆæœ
âœ… æ‚¬åœäº¤äº’æ•ˆæœ
âœ… çº¢ç‚¹æç¤ºé¢„ç•™
âœ… ç§»åŠ¨ç«¯è§¦æ‘¸åé¦ˆ
âœ… SVGå›¾æ ‡é›†æˆ
âœ… æ¸å˜è‰²èƒŒæ™¯
âœ… é˜´å½±æ•ˆæœ
```

---

## ğŸ‰ æ€»ç»“

âœ… **PCç«¯å’Œç§»åŠ¨ç«¯é¦–é¡µéƒ½å·²æ·»åŠ åœ¨çº¿å®¢æœæ‚¬æµ®æŒ‰é’®**  
âœ… **ç‚¹å‡»æŒ‰é’®ç›´æ¥è·³è½¬åˆ°å®æ—¶èŠå¤©é¡µé¢**  
âœ… **ç¾è§‚çš„ç´«è‰²æ¸å˜è®¾è®¡ + è„‰å†²åŠ¨ç”»**  
âœ… **é¢„ç•™æ–°æ¶ˆæ¯çº¢ç‚¹æç¤ºåŠŸèƒ½**  
âœ… **å®Œå…¨å“åº”å¼ï¼Œé€‚é…æ‰€æœ‰è®¾å¤‡**  

**ç«‹å³è®¿é—®é¦–é¡µä½“éªŒï¼** ğŸš€

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**ï¼š2026å¹´1æœˆ5æ—¥  
**å®æ–½çŠ¶æ€**ï¼šâœ… å®Œæˆ


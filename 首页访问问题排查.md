# é¦–é¡µè®¿é—®é—®é¢˜æ’æŸ¥å’Œè§£å†³æ–¹æ¡ˆ

## ğŸ› é—®é¢˜æè¿°
è®¿é—®é¦–é¡µæ—¶æç¤º"æŠ±æ­‰ï¼Œé¡µé¢è·‘ä¸¢äº†ï¼"

## ğŸ” é—®é¢˜åˆ†æ

### 1. index.php è‡ªåŠ¨è·³è½¬é€»è¾‘
åœ¨ `index.php` ç¬¬88-91è¡Œæœ‰è‡ªåŠ¨è·³è½¬é€»è¾‘ï¼š
```php
if (!isset($_SESSION['pc_ip_visited']) || $_SESSION['pc_ip_visited'] !== $ip) {
    $_SESSION['pc_ip_visited'] = $ip;
    header('Location: /Home/Login/index');  // é¦–æ¬¡è®¿é—®è·³è½¬åˆ°ç™»å½•é¡µ
    exit();
}
```

**è¯´æ˜**ï¼šPCç«¯é¦–æ¬¡è®¿é—®ä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚

### 2. æ¨¡æ¿æ ‡ç­¾é—®é¢˜
å®¢æœæŒ‰é’®çš„è·³è½¬ä½¿ç”¨äº† `{:U('Chat/index')}`ï¼Œè¿™æ˜¯ThinkPHPæ¨¡æ¿æ ‡ç­¾ï¼Œéœ€è¦åœ¨æœåŠ¡å™¨ç«¯è§£æã€‚

---

## âœ… å·²ä¿®å¤å†…å®¹

### 1. ä¿®æ”¹å®¢æœæŒ‰é’®è·³è½¬é“¾æ¥

#### PCç«¯ï¼ˆHome/View/Index/index.htmlï¼‰
```javascript
// ä¿®æ”¹å‰
window.location.href = "{:U('Chat/index')}";

// ä¿®æ”¹å
window.location.href = "/index.php/Home/Chat/index";
```

#### ç§»åŠ¨ç«¯ï¼ˆMobile/View/Index/index.htmlï¼‰
```javascript
// ä¿®æ”¹å‰
window.location.href = "{:U('Chat/index')}";

// ä¿®æ”¹å
window.location.href = "/index.php/Mobile/Chat/index";
```

---

## ğŸ“‹ æ­£ç¡®çš„è®¿é—®è·¯å¾„

### PCç«¯è·¯å¾„
```
é¦–é¡µï¼šhttps://168stoneex.com/index.php
æˆ–è€…ï¼šhttps://168stoneex.com/index.php/Home/Index/index
ç™»å½•ï¼šhttps://168stoneex.com/index.php/Home/Login/index
å®¢æœï¼šhttps://168stoneex.com/index.php/Home/Chat/index
```

### ç§»åŠ¨ç«¯è·¯å¾„
```
é¦–é¡µï¼šhttps://168stoneex.com/index.phpï¼ˆè‡ªåŠ¨è¯†åˆ«ç§»åŠ¨è®¾å¤‡ï¼‰
å®¢æœï¼šhttps://168stoneex.com/index.php/Mobile/Chat/index
```

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æµ‹è¯•1ï¼šç›´æ¥è®¿é—®é¦–é¡µ
```
è®¿é—®ï¼šhttps://168stoneex.com/
é¢„æœŸï¼š
- é¦–æ¬¡è®¿é—®ï¼šè·³è½¬åˆ° /Home/Login/index
- éé¦–æ¬¡è®¿é—®ï¼šæ˜¾ç¤ºé¦–é¡µå†…å®¹
```

### æµ‹è¯•2ï¼šè®¿é—®æŒ‡å®šé¦–é¡µ
```
è®¿é—®ï¼šhttps://168stoneex.com/index.php/Home/Index/index
é¢„æœŸï¼šç›´æ¥æ˜¾ç¤ºé¦–é¡µï¼Œçœ‹åˆ°æ‚¬æµ®å®¢æœæŒ‰é’®
```

### æµ‹è¯•3ï¼šç‚¹å‡»å®¢æœæŒ‰é’®
```
1. åœ¨é¦–é¡µç‚¹å‡»å³ä¸‹è§’ç´«è‰²å®¢æœæŒ‰é’®
2. é¢„æœŸè·³è½¬åˆ°ï¼š/index.php/Home/Chat/index
3. å¦‚æœæœªç™»å½•ï¼Œä¼šæç¤º"è¯·å…ˆç™»å½•"å¹¶è·³è½¬ç™»å½•é¡µ
```

### æµ‹è¯•4ï¼šç™»å½•åä½¿ç”¨å®¢æœ
```
1. å…ˆç™»å½•è´¦å·
2. è®¿é—®é¦–é¡µ
3. ç‚¹å‡»å®¢æœæŒ‰é’®
4. æ­£å¸¸è¿›å…¥èŠå¤©é¡µé¢
```

---

## ğŸ”§ å…¶ä»–å¯èƒ½çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šRuntimeç¼“å­˜é—®é¢˜
**ç—‡çŠ¶**ï¼šä¿®æ”¹åé¡µé¢æ²¡æœ‰å˜åŒ–

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ¸…é™¤ThinkPHPç¼“å­˜
rm -rf /Users/leo/Documents/workspan/php-project/168stoneex.com/Runtime/Cache/*
rm -rf /Users/leo/Documents/workspan/php-project/168stoneex.com/Runtime/Logs/*
rm -rf /Users/leo/Documents/workspan/php-project/168stoneex.com/Runtime/Temp/*

# æˆ–è€…ç›´æ¥åˆ é™¤æ•´ä¸ªRuntimeç›®å½•å†…å®¹
cd /Users/leo/Documents/workspan/php-project/168stoneex.com/Runtime
find . -type f -name "*.php" -delete
```

### é—®é¢˜2ï¼šéœ€è¦å…ˆç™»å½•
**ç—‡çŠ¶**ï¼šè®¿é—®èŠå¤©é¡µé¢æç¤º"è¯·å…ˆç™»å½•"

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å…ˆè®¿é—®ç™»å½•é¡µï¼š`/index.php/Home/Login/index`
2. ç™»å½•åå†ç‚¹å‡»å®¢æœæŒ‰é’®
3. æˆ–è€…ä¿®æ”¹ChatControllerï¼Œå…è®¸æœªç™»å½•ç”¨æˆ·è®¿é—®

### é—®é¢˜3ï¼šURLé‡å†™è§„åˆ™
**ç—‡çŠ¶**ï¼šå»æ‰ index.php åè®¿é—®404

**æ£€æŸ¥.htaccess**ï¼š
```apache
<IfModule mod_rewrite.c>
  Options +FollowSymlinks -Multiviews
  RewriteEngine On

  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*)$ index.php/$1 [QSA,PT,L]
</IfModule>
```

---

## ğŸ¯ æ¨èçš„è®¿é—®æ–¹å¼

### æ–¹å¼1ï¼šä½¿ç”¨å®Œæ•´è·¯å¾„ï¼ˆæ¨èï¼‰
```
PCç«¯é¦–é¡µï¼šhttps://168stoneex.com/index.php/Home/Index/index
ç§»åŠ¨ç«¯é¦–é¡µï¼šhttps://168stoneex.com/index.php/Mobile/Index/index
```

### æ–¹å¼2ï¼šä½¿ç”¨æ ¹è·¯å¾„ï¼ˆä¼šè‡ªåŠ¨è·³è½¬ï¼‰
```
https://168stoneex.com/
é¦–æ¬¡è®¿é—® â†’ è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
å†æ¬¡è®¿é—® â†’ æ˜¾ç¤ºé¦–é¡µï¼ˆæ ¹æ®è®¾å¤‡è‡ªåŠ¨è¯†åˆ«PC/Mobileï¼‰
```

---

## ğŸ“ å¦‚æœä»ç„¶å‡ºç°"é¡µé¢è·‘ä¸¢äº†"

### æ’æŸ¥æ­¥éª¤ï¼š

#### 1. æ£€æŸ¥æ§åˆ¶å™¨æ˜¯å¦å­˜åœ¨
```bash
# æ£€æŸ¥PCç«¯Indexæ§åˆ¶å™¨
ls -la /Users/leo/Documents/workspan/php-project/168stoneex.com/Application/Home/Controller/IndexController.class.php

# æ£€æŸ¥ç§»åŠ¨ç«¯Indexæ§åˆ¶å™¨
ls -la /Users/leo/Documents/workspan/php-project/168stoneex.com/Application/Mobile/Controller/IndexController.class.php
```

#### 2. æ£€æŸ¥è§†å›¾æ–‡ä»¶æ˜¯å¦å­˜åœ¨
```bash
# æ£€æŸ¥PCç«¯é¦–é¡µè§†å›¾
ls -la /Users/leo/Documents/workspan/php-project/168stoneex.com/Application/Home/View/Index/index.html

# æ£€æŸ¥ç§»åŠ¨ç«¯é¦–é¡µè§†å›¾
ls -la /Users/leo/Documents/workspan/php-project/168stoneex.com/Application/Mobile/View/Index/index.html
```

#### 3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
```bash
# æŸ¥çœ‹ThinkPHPæ—¥å¿—
tail -100 /Users/leo/Documents/workspan/php-project/168stoneex.com/Runtime/Logs/Home/$(date +%y_%m_%d).log
```

#### 4. å¼€å¯è°ƒè¯•æ¨¡å¼
å·²åœ¨ `index.php` ä¸­è®¾ç½®ï¼š
```php
define('APP_DEBUG', true);  // å·²å¼€å¯
```

è®¿é—®æ—¶ä¼šæ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚

---

## ğŸš€ å¿«é€Ÿä¿®å¤å‘½ä»¤

### æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°è®¿é—®
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /Users/leo/Documents/workspan/php-project/168stoneex.com

# æ¸…é™¤Runtimeç¼“å­˜
rm -rf Runtime/Cache/*
rm -rf Runtime/Temp/*

# ç¡®ä¿Runtimeç›®å½•å¯å†™
chmod -R 777 Runtime/

# ç„¶ååˆ·æ–°æµè§ˆå™¨è®¿é—®
```

---

## âœ… ä¿®å¤ç¡®è®¤æ¸…å•

```
â–¡ PCç«¯å®¢æœæŒ‰é’®é“¾æ¥å·²æ”¹ä¸ºï¼š/index.php/Home/Chat/index
â–¡ ç§»åŠ¨ç«¯å®¢æœæŒ‰é’®é“¾æ¥å·²æ”¹ä¸ºï¼š/index.php/Mobile/Chat/index
â–¡ Runtimeç¼“å­˜å·²æ¸…é™¤
â–¡ æ–‡ä»¶æƒé™æ­£ç¡®ï¼ˆRuntime 777ï¼‰
â–¡ æ§åˆ¶å™¨æ–‡ä»¶å­˜åœ¨
â–¡ è§†å›¾æ–‡ä»¶å­˜åœ¨
â–¡ æ•°æ®åº“é…ç½®æ­£ç¡®
â–¡ è°ƒè¯•æ¨¡å¼å·²å¼€å¯
```

---

## ğŸ’¡ æç¤º

å¦‚æœæ‚¨è®¿é—®çš„æ˜¯ï¼š
- **é¦–é¡µæ ¹è·¯å¾„** (`https://168stoneex.com/`) â†’ ä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µï¼ˆé¦–æ¬¡è®¿é—®ï¼‰
- **æŒ‡å®šé¦–é¡µè·¯å¾„** (`https://168stoneex.com/index.php/Home/Index/index`) â†’ ç›´æ¥æ˜¾ç¤ºé¦–é¡µ

å»ºè®®æ‚¨ï¼š
1. å…ˆç™»å½•è´¦å·
2. ç„¶åè®¿é—®é¦–é¡µ
3. ç‚¹å‡»å®¢æœæŒ‰é’®æµ‹è¯•åŠŸèƒ½

---

## ğŸ“ å½“å‰çŠ¶æ€

âœ… **å®¢æœæŒ‰é’®è·³è½¬é“¾æ¥å·²ä¿®å¤**  
âœ… **PCç«¯å’Œç§»åŠ¨ç«¯è·¯å¾„éƒ½å·²æ›´æ–°ä¸ºç»å¯¹è·¯å¾„**  
âœ… **ä¸å†ä¾èµ–ThinkPHPæ¨¡æ¿æ ‡ç­¾**  

**è¯·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶åˆ·æ–°é¡µé¢æµ‹è¯•ï¼**

---

**æ›´æ–°æ—¶é—´**ï¼š2026å¹´1æœˆ5æ—¥  
**ä¿®å¤çŠ¶æ€**ï¼šâœ… å®Œæˆ

